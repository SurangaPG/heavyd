<?xml version="1.0"?>

<project name="Composer tasks" default="composer:help" description="Contains all the task used to ready the different composer dependencies.">

    <target name="composer:help">
        <exec passthru="true" command="${bin.phing} -l" />
    </target>

    <target name="composer:full" description="Setup a full composer dev install.">
        <phingcall target="composer:dev" />
        <phingcall target="composer:deployer" />
        <phingcall target="composer:phing" />
        <phingcall target="composer:workflow" />
    </target>

    <target name="composer:build"
            description="Install the main project ready for a deploy.">
        <exec dir="${project.basedir}"
              passthru="true"
              command="${bin.composer} install --no-progress --no-dev --optimize-autoloader"
        />
    </target>

    <target name="composer:dev"
            description="Install the main project ready for dev purposes.">
        <exec dir="${project.basedir}"
              passthru="true"
              command="${bin.composer} install --no-progress"
        />
    </target>

    <target name="composer:phing" description="Install the phing extra helpers.">
        <exec dir="${project.basedir}/.phing"
              passthru="true"
              command="${bin.composer} install"
        />
    </target>

    <target name="composer:deployer" description="Install the deployer extra helpers.">
        <exec dir="${project.basedir}/.deployer"
              passthru="true"
              command="${bin.composer} install"
        />
    </target>

    <target name="composer:workflow" description="Install the workflow extra helpers.">
        <exec dir="${project.basedir}/.workflow"
              passthru="true"
              command="${bin.composer} install"
        />
    </target>

</project>